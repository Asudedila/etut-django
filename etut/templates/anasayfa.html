<!DOCTYPE html>
<html>
<head>
    <title>EtÃ¼t Listesi</title>
</head>
<body>
    <form method="post" action="{% url 'logout' %}">
        {% csrf_token %}
        <button type="submit">ğŸšª Ã‡Ä±kÄ±ÅŸ Yap</button>
    </form>
    
    

    <h2>EtÃ¼t Listesi</h2>

    <p>Merhaba, {{ user.username }} ğŸ‘‹</p>
       

    <h3>Mevcut EtÃ¼tler:</h3>
    <ul>
    
    {% for etut in etutler %}
        <li>
            ğŸ“… {{ etut.tarih }} - ğŸ•’ {{ etut.saat }} | ğŸ‘¨â€ğŸ« {{ etut.ogretmen.username }}  
            - <strong>Durum:</strong> {{ etut.durum }}

            {% if etut.durum == 'bos' and  request.user.profil.rol == "ogrenci"%}
                | <a href="{% url 'etut_rezerve' etut.id %}"> Rezerve Et</a>
            {% elif etut.ogrenci == user %}
                | <a href="{% url 'etut_iptal' etut.id %}">Ä°ptal Et</a>
            {% endif %}
        </li>
    {% empty %}
        <li>HenÃ¼z hiÃ§ etÃ¼t eklenmemiÅŸ.</li>
    {% endfor %}
    </ul>
    {% if request.user.profil.rol == "ogretmen" %}
    <a href="{% url 'etut_ekle' %}">â• EtÃ¼t Ekle</a>
    <h3>OluÅŸturduÄŸunuz EtÃ¼tler:</h3>
    <table border="1">
        <tr>
            <th>Tarih</th>
            <th>Saat</th>
            <th>Durum</th>
            <th>Alan Ã–ÄŸrenci</th>
        </tr>
        {% for etut in etutler %}
        <tr>
            <td>{{ etut.tarih }}</td>
            <td>{{ etut.saat }}</td>
            <td>{{ etut.durum }}</td>
            <td>
                {% if etut.ogrenci %}
                    {{ etut.ogrenci.username }}
                {% else %}
                    HenÃ¼z alÄ±nmadÄ±
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </table>
    {% endif %}
    
    {% if request.user.profil.rol == "ogrenci" %}
    <h3>ğŸ“… Gelecek EtÃ¼tler</h3>
    {% if gelecek_etutler %}
    <ul>
    {% for etut in gelecek_etutler %}
        <li>{{ etut.tarih }} - {{ etut.saat }} | {{ etut.ogretmen.username }}</li>
    {% endfor %}
    </ul>
    {% else %}
    <p>Gelecek etÃ¼tÃ¼nÃ¼z yok.</p>
    {% endif %}

    <hr>

    <h3>ğŸ•“ GeÃ§miÅŸ EtÃ¼tler</h3>
    {% if gecmis_etutler %}
    <ul>
    {% for etut in gecmis_etutler %}
        <li>{{ etut.tarih }} - {{ etut.saat }} | {{ etut.ogretmen.username }}</li>
    {% endfor %}
    </ul>
    {% else %}
    <p>GeÃ§miÅŸ etÃ¼t kaydÄ±nÄ±z yok.</p>
    {% endif %}
    {% endif %}

</body>
</html>
